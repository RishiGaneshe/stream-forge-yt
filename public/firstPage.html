<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>StreamForge — Download Videos Smartly</title>

<style>
:root{
  --bg:#0f172a;
  --bg-soft:#071029;
  --card:#0b1220;
  --accent:#ef4444;
  --accent-soft:#f87171;
  --muted:#94a3b8;
  --radius:14px;
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
}

*{box-sizing:border-box}
html,body{margin:0}

body{
  background:linear-gradient(180deg,var(--bg-soft),var(--bg));
  color:#e6eef8;
  -webkit-font-smoothing:antialiased;
}

/* ===== Layout ===== */
.container{
  max-width:1100px;
  margin:auto;
  padding:24px 16px 80px;
}

/* ===== Header ===== */
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:48px;
}

.logo{
  font-weight:800;
  font-size:20px;
  letter-spacing:.3px;
}
.logo span{color:var(--accent)}

.nav{
  font-size:13px;
  color:var(--muted);
}

/* ===== Hero ===== */
.hero{
  text-align:center;
  margin-bottom:56px;
}
.hero h1{
  font-size:34px;
  margin:0 0 12px;
}
.hero p{
  color:var(--muted);
  font-size:16px;
  max-width:600px;
  margin:0 auto;
}

/* ===== Inspector Card ===== */
.card{
  background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.05);
  box-shadow:0 20px 50px rgba(2,6,23,0.7);
  border-radius:var(--radius);
  padding:28px;
}

.badge{
  display:inline-block;
  background:var(--accent);
  padding:6px 14px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  margin-bottom:14px;
}

h2{
  margin:0 0 6px;
  font-size:22px;
}
.lead{
  color:var(--muted);
  margin-bottom:18px;
}

/* ===== Input ===== */
.input-row{
  display:flex;
  gap:10px;
}
input{
  flex:1;
  background:#020617;
  border:1px solid rgba(255,255,255,0.08);
  border-radius:10px;
  padding:12px 14px;
  color:#e6eef8;
  font-size:14px;
  outline:none;
}
button{
  background:var(--accent);
  border:none;
  color:white;
  border-radius:10px;
  padding:12px 20px;
  font-weight:600;
  cursor:pointer;
}
button:disabled{opacity:.6}

/* ===== Status ===== */
.status{
  margin-top:10px;
  font-size:13px;
  color:var(--muted);
}

/* ===== Video ===== */
.video-card{
  display:none;
  margin-top:24px;
  border-top:1px solid rgba(255,255,255,0.06);
  padding-top:24px;
}

.video-header{
  display:flex;
  gap:18px;
}
.thumb{
  width:240px;
  border-radius:12px;
  object-fit:cover;
  border:1px solid rgba(255,255,255,0.05);
}
.meta h3{
  margin:0 0 6px;
  font-size:18px;
}
.meta .small{
  font-size:13px;
  color:var(--muted);
}

/* ===== Formats ===== */
.formats{
  margin-top:22px;
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
  gap:14px;
}
.format{
  background:rgba(255,255,255,0.03);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:12px;
  padding:14px;
}
.format strong{font-size:14px}
.format span{
  display:block;
  font-size:12px;
  color:var(--muted);
  margin:6px 0 10px;
}
.download{
  width:100%;
  background:transparent;
  border:1px solid var(--accent-soft);
  color:var(--accent-soft);
  padding:8px;
  border-radius:8px;
  font-size:13px;
}

/* ===== Features ===== */
.features{
  margin-top:64px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:24px;
}
.feature{
  background:rgba(255,255,255,0.02);
  border:1px solid rgba(255,255,255,0.04);
  border-radius:14px;
  padding:20px;
}
.feature h4{
  margin:0 0 6px;
  font-size:15px;
}
.feature p{
  margin:0;
  font-size:13px;
  color:var(--muted);
}

/* ===== Footer ===== */
footer{
  margin-top:64px;
  text-align:center;
  font-size:12px;
  color:var(--muted);
}

/* ===== Mobile ===== */
@media(max-width:640px){
  .hero h1{font-size:26px}
  .video-header{flex-direction:column}
  .thumb{width:100%}
  .input-row{flex-direction:column}
}
</style>
</head>

<body>
<div class="container">

<header>
  <div class="logo">Stream<span>Forge</span></div>
  <div class="nav">Video Inspector</div>
</header>

<section class="hero">
  <h1>Download Videos the Smart Way</h1>
  <p>
    Inspect video metadata, choose resolution, and download clean MP4 files —
    no ads, no clutter.
  </p>
</section>

<section class="card">
  <span class="badge">Inspector</span>
  <h2>Paste Video URL</h2>
  <p class="lead">Fetch metadata and available download formats.</p>

  <div class="input-row">
    <input id="urlInput" placeholder="https://www.youtube.com/watch?v=..." />
    <button id="fetchBtn">Fetch</button>
  </div>

  <div id="status" class="status"></div>

  <div id="videoCard" class="video-card">
    <div class="video-header">
      <img id="thumb" class="thumb"/>
      <div class="meta">
        <h3 id="title"></h3>
        <div id="uploader" class="small"></div>
        <div id="duration" class="small"></div>
      </div>
    </div>

    <div id="formats" class="formats"></div>
  </div>
</section>

<section class="features">
  <div class="feature">
    <h4>Accurate Metadata</h4>
    <p>Real format data directly from yt-dlp.</p>
  </div>
  <div class="feature">
    <h4>No Client Processing</h4>
    <p>All heavy lifting happens server-side.</p>
  </div>
  <div class="feature">
    <h4>Clean MP4 Output</h4>
    <p>Audio + video properly merged.</p>
  </div>
</section>

<footer>
  © 2026 StreamForge — Access videos freely — your control, your pace, no strings attached. Thank you Team Yt-dlp
</footer>

</div>

<script>
const fetchBtn=document.getElementById('fetchBtn')
const urlInput=document.getElementById('urlInput')
const statusEl=document.getElementById('status')
const videoCard=document.getElementById('videoCard')

fetchBtn.onclick=async()=>{
  const url=urlInput.value.trim()
  if(!url){statusEl.textContent='Enter a valid URL';return}

  fetchBtn.disabled=true
  statusEl.textContent='Fetching video info...'
  videoCard.style.display='none'

  try{
    const r=await fetch(`http://localhost:3000/video/info?url=${encodeURIComponent(url)}`)
    const j=await r.json()
    if(!j.success)throw 0
    render(j.data)
    statusEl.textContent=''
    videoCard.style.display='block'
  }catch{
    statusEl.textContent='Failed to fetch video info'
  }finally{
    fetchBtn.disabled=false
  }
}

function render(d){
  thumb.src=d.thumbnail
  title.textContent=d.title
  uploader.textContent=`Uploader: ${d.uploader}`
  duration.textContent=`Duration: ${d.duration}s`

  formats.innerHTML=''
  d.formats.forEach(f=>{
    const el=document.createElement('div')
    el.className='format'
    el.innerHTML=`
      <strong>${f.resolution}</strong>
      <span>${f.vcodec} · ${f.acodec}</span>
      <button class="download" onclick="download('${f.formatId}')">Download</button>`
    formats.appendChild(el)
  })
}

function download(format){
  const url=urlInput.value.trim()
  location.href=`http://localhost:3000/video/download?url=${encodeURIComponent(url)}&format=${format}`
}
</script>
</body>
</html>
